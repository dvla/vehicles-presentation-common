@(openingHour: Int, closingHour: Int, closingWarnPeriodMins: Int, dateService: uk.gov.dvla.vehicles.presentation.common.services.DateService)(implicit lang: Lang)

@import org.joda.time.DateTime
@import org.joda.time.DateTimeZone
@import uk.gov.dvla.vehicles.presentation.common.services.ServiceClosingWarningV2

@*
The service closing warning is only displayed when the current time is within a specified period.
The message changes when the time is less than 5 minutes. In this case the time remaining is displayed and will
be updated when the page is refreshed.
*@
@ServiceClosingWarningV2.warning(closingHour, closingWarnPeriodMins).map { timeRemaining =>
    @if(timeRemaining <= "00:05.00") {
        @* 5 min warning *@
        <div class="serviceClosingWarning">
            <p>
            @Messages(
                "global.serviceCloseWarning.fiveMinutes",
                openingHour,
                closingHour,
                timeRemaining
            )
            </p>
        </div>
    } else {
        @* Normal service closing message *@
        <div class="serviceClosingWarning">
            <p>
            @Messages("global.serviceCloseWarning",
                new DateTime(dateService.now, DateTimeZone.forID("Europe/London")).toString(org.joda.time.format.DateTimeFormat.forPattern("HH:mm")),
                closingHour
            )
            </p>
        </div>
    }
}